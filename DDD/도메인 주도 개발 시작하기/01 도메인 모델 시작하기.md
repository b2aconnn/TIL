## **도메인이란?**

#### 소프트웨어로 해결하고자 하는 문제 영역



steps:
  - name: 'gcr.io/cloud-builders/gcloud'
    id: 'build-and-test'
    entrypoint: 'bash'
    args: ['./gradlew', 'clean', 'build']
  - name: 'gcr.io/cloud-builders/gcloud'
    waitFor: ['build-and-test']
    id: 'storage-upload'
    entrypoint: bash
    args:
      - -c
      - |-
        gcloud storage cp /workspace/build/libs/app.jar gs://c-cocaine-deploy/
#  - name: 'gcr.io/cloud-builders/gcloud'
#    waitFor: ['storage-upload']
#    id: 'app-file-download-to-mig'
#    entrypoint: bash
#    args:
#      - -c
#      - |
#        #!/bin/bash
#        if [ ! -e /workspace/be-api-instances.txt ]; then
#          touch /workspace/be-api-instances.txt
#        fi
#      
#        gcloud compute instance-groups managed list-instances c-cocaine-instance-group --zone=asia-northeast3-a --format="table(NAME)" --filter="STATUS=RUNNING" > /workspace/be-api-instances.txt
#      
#        while read line
#        do
#          if [ $line = "NAME" ]; then
#            continue
#          fi
#          echo Execute instance name : $line
#          gcloud compute ssh $line --zone=asia-northeast3-a --command='sudo gcloud storage cp gs://c-cocaine-deploy/app.jar /home/partner'  < /dev/null
#        done < /workspace/be-api-instances.txt
  - name: 'gcr.io/cloud-builders/gcloud'
    waitFor: ['storage-upload']
    id: 'deploy'
    entrypoint: bash
    args:
      - -c
      - |
        #!/bin/bash
        gcloud compute ssh c-cocaine-was --zone=asia-northeast3-a --command='/service/deployScript/deploy.sh' < /dev/null
    options:
      logging: CLOUD_LOGGING_ONLY
    - '





















