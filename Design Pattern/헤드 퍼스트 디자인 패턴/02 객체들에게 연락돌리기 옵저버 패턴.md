## ê¸°ìƒ ëª¨ë‹ˆí„°ë§ ì• í”Œë¦¬ì¼€ì´ì…˜

### ì‹œìŠ¤í…œ ìš”ì†Œ

- ê¸°ìƒ ìŠ¤í…Œì´ì…˜ (ì‹¤ì œ ê¸°ìƒ ì •ë³´ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ë¬¼ë¦¬ ì¥ë¹„)
- WeatherData ê°ì²´ (ê¸°ìƒ ìŠ¤í…Œì´ì…˜ìœ¼ë¡œë¶€í„° ì˜¤ëŠ” ì •ë³´ë¥¼ ì¶”ì í•˜ëŠ” ê°ì²´)
- ë””ìŠ¤í”Œë ˆì´ ì¥ë¹„ (ì‚¬ìš©ìì—ê²Œ í˜„ì¬ ê¸°ìƒ ì¡°ê±´ì„ ë³´ì—¬ì£¼ëŠ” ë¬¼ë¦¬ ì¥ë¹„)

<img width="500" alt="ìŠ¤í¬ë¦°ìƒ· 2023-08-18 ì˜¤í›„ 2 30 53" src="https://github.com/b2aconnn/TIL/assets/101120568/cece6bf3-7a4f-425c-b1d0-50bc991a9249">

<br>

### WaeatherData í´ë˜ìŠ¤

<img width="500" alt="ìŠ¤í¬ë¦°ìƒ· 2023-08-18 ì˜¤í›„ 2 38 59" src="https://github.com/b2aconnn/TIL/assets/101120568/a5c51062-1b2a-4dc0-880e-50d2ba658821">

<br>

### êµ¬í˜„ ëª©í‘œ

ğŸ‘‰ ê¸°ìƒ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ 3ê°€ì§€ë¥¼ êµ¬í˜„

- ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ : ì¡°ê±´, ê¸°ìƒ í†µê³„, ê¸°ìƒ ì˜ˆë³´ ë””ìŠ¤í”Œë ˆì´

- **WeatherDataì— ìƒˆë¡œìš´ ì¸¡ì •ê°’ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ measurementsChanged() ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•´ ë””ìŠ¤í”Œë ˆì´ ê°±ì‹ **
- measurementsChanged()ì— ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ êµ¬í˜„í•´ì•¼ í•¨

ì¶”ê°€ ì‚¬í•­ : í™•ì¥ì„±ì„ ê³ ë ¤í•œ ì„¤ê³„

<br>

### ê¸°ìƒ ìŠ¤í…Œì´ì…˜ìš© ì½”ë“œ ì¶”ê°€í•´ë³´ê¸°

~~~java
public class WeatherData {
    // ì¸ìŠ¤í„´ìŠ¤ ë³€ìˆ˜ ì„ ì–¸

    public void measurementsChanged() {
        float temp = getTemperature();
        float humidity = getHumidity();
        float pressure = getPressure();

        // - êµ¬ì²´ì ì¸ êµ¬í˜„ìœ¼ë¡œ ì½”ë“œ ì‘ì„±: í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œì— í•­ëª© ì¶”ê°€, ì‚­ì œ ë¶ˆê°€ëŠ¥
        // - ë°”ë€” ìˆ˜ ìˆëŠ” ë¶€ë¶„ì„ ìº¡ìŠí™”ë¥¼ í•˜ì§€ ì•ŠìŒ
        currentConditionsDisplay.update(temp, humidity, pressure);
        statisticsDisplay.update(temp, humidity, pressure);
        forecastDisplay.update(temp, humidity, pressure);
    }

    // ê¸°íƒ€ ë©”ì†Œë“œ
}
~~~

â—ï¸ìœ„ì˜ ì½”ë“œì˜ ë¬¸ì œì 

- ì¸í„°í˜ì´ìŠ¤ê°€ ì•„ë‹Œ êµ¬ì²´ì ì¸ êµ¬í˜„ì„ ë°”íƒ•ìœ¼ë¡œ ì½”ë“œ ì‘ì„±
- ìƒˆë¡œìš´ ë””ìŠ¤í”Œë ˆì´ í•­ëª©ì´ ì¶”ê°€ë  ë•Œë§ˆë‹¤ ì½”ë“œë¥¼ ë³€ê²½í•´ì•¼ í•¨
- ì‹¤í–‰ ì¤‘ì— ë””ìŠ¤í”Œë ˆì´ í•­ëª©ì„ ì¶”ê°€ ë˜ëŠ” ì œê±°í•  ìˆ˜ ì—†ìŒ
- ë°”ë€ŒëŠ” ë¶€ë¶„ì„ ìº¡ìŠí™”í•˜ì§€ ì•ŠìŒ

<br>

## ì˜µì €ë²„ íŒ¨í„´ ì´í•´í•˜ê¸°

ì‹ ë¬¸ì´ë‚˜ ì¡ì§€ì˜ êµ¬ë… í˜•ì‹

1. ì‹ ë¬¸ì‚¬ê°€ ì‹ ë¬¸ì„ ì°ì–´ë‚´ì„œ ë§Œë“¦
2. ë…ìëŠ” íŠ¹ì • ì‹ ë¬¸ì‚¬ì— êµ¬ë… ì‹ ì²­ì„ í•˜ë©´ ë§¤ë²ˆ ìƒˆë¡œìš´ ì‹ ë¬¸ì´ ë‚˜ì˜¬ ë•Œë§ˆë‹¤ ë°°ë‹¬ì„ ë°›ìŒ
3. ì‹ ë¬¸ì„ ë” ì´ìƒ ë³´ê³  ì‹¶ì§€ ì•Šì„ ê²½ìš°, êµ¬ë… í•´ì§€ ì‹ ì²­ (ë” ì´ìƒ ì‹ ë¬¸ì´ ì˜¤ì§€ ì•ŠìŒ)

<br>

**ì‹ ë¬¸ì‚¬(ì£¼ì œ) + êµ¬ë…ì(ì˜µì €ë²„) = ì˜µì €ë²„ íŒ¨í„´**

<br>

### ì˜µì €ë²„ íŒ¨í„´ ì •ì˜

**ì˜µì €ë²„ íŒ¨í„´(Observer Pattern)ì€ í•œ ê°ì²´ì˜ ìƒíƒœê°€ ë°”ë€Œë©´ ê·¸ ê°ì²´ì— ì˜ì¡´í•˜ëŠ” ë‹¤ë¥¸ ê°ì²´ì—ê²Œ ì—°ë½ì´ ê°€ê³  ìë™ìœ¼ë¡œ ê°±ì‹ ë˜ëŠ” ì¼ëŒ€ë‹¤(one-to-many) ì˜ì¡´ì„±ì„ ê°–ëŠ” íŒ¨í„´ì´ë‹¤.**

<img width="500" alt="ìŠ¤í¬ë¦°ìƒ· 2023-08-18 ì˜¤í›„ 3 36 14" src="https://github.com/b2aconnn/TIL/assets/101120568/a58de948-a179-4ef6-a983-6136141ac3aa">

<br>

### ì˜µì €ë²„ íŒ¨í„´ êµ¬ì¡°

**ì˜µì €ë²„ íŒ¨í„´ì˜ í´ë˜ìŠ¤ ë‹¤ì´ì–´ê·¸ë¨**

<img width="550" alt="ìŠ¤í¬ë¦°ìƒ· 2023-08-18 ì˜¤í›„ 3 46 47" src="https://github.com/b2aconnn/TIL/assets/101120568/35fa1e83-22f3-4d99-bead-78ab0b289dcb">

<br>

### ì˜µì €ë²„ íŒ¨í„´ì˜ ëŠìŠ¨í•œ ê²°í•©

**ëŠìŠ¨í•œ ê²°í•©(Loose Coupling)ì€ ê°ì²´ë“¤ì´ ìƒí˜¸ì‘ìš©í•  ìˆ˜ëŠ” ìˆì§€ë§Œ, ì„œë¡œë¥¼ ì˜ ëª¨ë¥´ëŠ” ê´€ê³„ë¥¼ ì˜ë¯¸**

- ëŠìŠ¨í•œ ê²°í•©ì„ í™œìš©í•˜ë©´ ìœ ì—°ì„±ì´ ë§¤ìš° ì¢‹ì•„ì§
- ì£¼ì œëŠ” ì˜µì €ë²„ê°€ íŠ¹ì • ì¸í„°í˜ì´ìŠ¤(Observer ì¸í„°í˜ì´ìŠ¤)ë¥¼ êµ¬í˜„í•œë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì•Œì•„ë„ ë¨
- ì˜µì €ë²„ë¥¼ ì–¸ì œë“ ì§€(í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ë“±) ìƒˆë¡œ ì¶”ê°€, ì‚­ì œ í•  ìˆ˜ ìˆìŒ
- ìƒˆë¡œìš´ í˜•ì‹ì˜ ì˜µì €ë²„ë¥¼ ì¶”ê°€í•  ë•Œë„ ì£¼ì œë¥¼ ë³€ê²½í•  í•„ìš”ê°€ ì—†ìŒ
- ì£¼ì œì™€ ì˜µì €ë²„ëŠ” ì„œë¡œ ë…ë¦½ì ìœ¼ë¡œ ì¬ì‚¬ìš© ê°€ëŠ¥
- ì£¼ì œë‚˜ ì˜µì €ë²„ê°€ ë‹¬ë¼ì ¸ë„ ì„œë¡œì—ê²Œ ì˜í–¥ì„ ë¯¸ì¹˜ì§€ ì•ŠìŒ

<br>

## ì˜µì €ë²„ íŒ¨í„´ì„ í™œìš©í•œ ê¸°ìƒ ìŠ¤í…Œì´ì…˜

### ê¸°ìƒ ìŠ¤í…Œì´ì…˜ êµ¬ì¡° ì„¤ê³„

<img width="550" alt="ìŠ¤í¬ë¦°ìƒ· 2023-08-18 ì˜¤í›„ 3 58 19 png" src="https://github.com/b2aconnn/TIL/assets/101120568/2e51533a-b555-49cd-9b99-da862475e423">

<br>

### ê¸°ìƒ ìŠ¤í…Œì´ì…˜ êµ¬í˜„

**Subject Interface**

~~~java
public interface Subject {
    // ì˜µì €ë²„ë¥¼ ì¸ìë¡œ ë°›ì•„ ì¶”ê°€, ì‚­ì œí•˜ëŠ” í–‰ë™
    public void registerObserver(Observer o);
    public void removeObserver(Observer o);

    // ì£¼ì œì˜ ìƒíƒœ ë³€ê²½ ì‹œ ì˜µì €ë²„ì—ê²Œ ì•Œë ¤ì£¼ëŠ” í–‰ë™
    public void notifyObservers();
}

public interface Observer {
    // ë§¤ê°œ ë³€ìˆ˜ë¥¼ í†µí•´ ë³€ê²½ëœ ìƒíƒœ ì „ë‹¬
    public void update(float temp, float humidity, float pressure);
}

public interface DisplayElement {
    public void display();
}
~~~

<br>

**Subject Interface ë¥¼ êµ¬í˜„í•œ WeatherData í´ë˜ìŠ¤**

~~~java
public class WeatherData implements Subject {
    private List<Observer> observers;
    private float temperature;
    private float humidity;
    private float pressure;

    public WeatherData() {
        observers = new ArrayList<Observer>();
    }

    public void registerObserver(Observer o) {
        observers.add(o);
    }

    public void removeObserver(Observer o) {
        observers.remove(o);
    }

    public void notifyObservers() {
        for (Observer observer : observers) {
            observer.update(temperature, humidity, pressure);
        }
    }

    public void measurementsChanged() {
        // ê°€ìƒ ìŠ¤í…Œì´ì…˜ìœ¼ë¡œë¶€í„° ê°±ì‹ ëœ ì¸¡ì •ê°’ì„ ë°›ìœ¼ë©´ ì˜µì €ë²„ë“¤ì—ê²Œ ì•Œë¦¼
        notifyObservers();
    }

    public void setMeasurements(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;
        measurementsChanged();
    }

    // ê¸°íƒ€ WeatherData ë©”ì†Œë“œ
}
~~~

<br>

**ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ ì¤‘ í•˜ë‚˜ì¸ CurrentConditionsDisplay êµ¬í˜„**

~~~java
public class CurrentConditionsDisplay implements Observer, DisplayElement {
    private float temperature;
    private float humidity;
    private WeatherData weatherData;

    // ê°ì²´ ìƒì„± ì‹œ WeatherData(ì£¼ì œ) ê°ì²´ë¥¼ ì „ë‹¬ ë°›ì•„ ì˜µì €ë²„ë¡œ ë“±ë¡
    public CurrentConditionsDisplay(WeatherData weatherData) {
        this.weatherData = weatherData;
        weatherData.registerObserver(this);
    }

    // ì£¼ì œ ê°ì²´ì—ì„œ ìƒíƒœ ë³€ê²½ ì‹œ update() ë©”ì„œë“œë¥¼ í†µí•´ ë³€ê²½ ìƒíƒœ ì „ë‹¬
    public void update(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        display();
    }

    public void display() {
        System.out.println("í˜„ì¬ ìƒíƒœ: ì˜¨ë„ " + temperature
                + "F, ìŠµë„ " + humidity + "%");
    }
}
~~~

<br>

**ê¸°ìƒ ìŠ¤í…Œì´ì…˜ í…ŒìŠ¤íŠ¸**

~~~java
public class WeatherStation {
    public static void main(String[] args) {
        WeatherData weatherData = new WeatherData();

        CurrentConditionsDisplay currentDisplay =
                new CurrentConditionsDisplay(weatherData);
        StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);
        ForecastDisplay forecastDisplay = new ForecastDisplay(weatherData);
        weatherData.setMeasurements(80, 65, 30.4f);
        weatherData.setMeasurements(82, 70, 29.2f);
        weatherData.setMeasurements(78, 90, 29.2f);
    }
}
~~~

<br>

ğŸ’¡ **ìœ„ì˜ ì½”ë“œì²˜ëŸ¼ ì£¼ì œê°€ ì˜µì €ë²„ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ëŠ” í‘¸ì‰¬(push) ë°©ë²•ë³´ë‹¤ëŠ” ì˜µì €ë²„ê°€ ì£¼ì œë¡œë¶€í„° ë°ì´í„°ë¥¼ ë‹¹ê²¨ì˜¤ëŠ” í’€(pull) ë°©ë²•ì„ í™œìš©í•˜ë©´ ì½”ë“œë¥¼ ì¡°ê¸ˆ ë” ì¼ë°˜í™”í•  ìˆ˜ ìˆê³ , ìƒˆë¡œìš´ ë””ìŠ¤í”Œë ˆì´ë¥¼ ì¶”ê°€í•  ë•Œë„ ë” ì‰¬ì›Œì§„ë‹¤.**

- push ë°©ë²•ì€ ì£¼ì œì—ì„œ ì „ë‹¬í•˜ëŠ” ìƒíƒœê°€ ì¶”ê°€ë˜ë©´ ë©”ì†Œë“œì˜ ë§¤ê°œ ë³€ìˆ˜ê°€ ëŠ˜ì–´ë‚˜ ì „ë‹¬í•˜ëŠ” ì£¼ì œ ê°ì²´ì™€ ì „ë‹¬ ë°›ëŠ” ì˜µì €ë²„ ê°ì²´ì—ì„œ ë©”ì„œë“œë¥¼ ì¼ê´„ì ìœ¼ë¡œ ìˆ˜ì •í•´ì¤˜ì•¼ í•˜ëŠ” ë‹¨ì ì´ ìˆë‹¤.
- pull ë°©ë²•ì€ ì£¼ì œ ê°ì²´ì—ì„œ ìƒíƒœë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆëŠ” í–‰ë™(ë©”ì„œë“œ)ì„ ì¶”ê°€í•˜ë©´ ê° ì˜µì €ë²„ ê°ì²´ì—ì„œ í•„ìš”í•œ ìƒíƒœë§Œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì–´ ì¡°ê¸ˆ ë” ìœ ì—°í•  ìˆ˜ ìˆë‹¤.

<br>

**pull ë°©ì‹ì˜ CurrentConditionDisplay**

~~~java
public class CurrentConditionsDisplay implements Observer, DisplayElement {
    // ...
    public void update() {
        this.temperature = weatherData.getTemperature();
        this.humidity = weatherData.getHumidity();
        display();
    }
    // ...
}
~~~

<br>

<br>

## ë””ìì¸ ì›ì¹™

- ìƒí˜¸ì‘ìš©í•˜ëŠ” ê°ì²´ ì‚¬ì´ì—ëŠ” ê°€ëŠ¥í•˜ë©´ ëŠìŠ¨í•œ ê²°í•©ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.
  - ëŠìŠ¨í•˜ê²Œ ê²°í•©í•˜ëŠ” ë””ìì¸ì„ ì‚¬ìš©í•˜ë©´ ê°ì²´ ì‚¬ì´ì˜ ìƒí˜¸ì˜ì¡´ì„±ì„ ìµœì†Œí™”í•˜ê¸° ë•Œë¬¸ì— ë³€ê²½ ì‚¬í•­ì´ ìƒê²¨ë„ ë¬´ë‚œíˆ ì²˜ë¦¬í•  ìˆ˜ ìˆëŠ” ìœ ì—°í•œ ê°ì²´ì§€í–¥ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•  ìˆ˜ ìˆìŒ
